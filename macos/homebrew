function homebrew_install_binary() {
    which brew > /dev/null 2>&1
    if [[ $? -eq 1 ]]; then
        /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

        # refresh available commands in zsh
        rehash
    fi
}

function homebrew_install_package() {
    brew list -1 | grep -q "^$1\$"
    if [[ $? -eq 1 ]]; then
        brew install $1 > /dev/null
    fi
}

function homebrew_update() {
    # make sure we're using the latest version of homebrew
    brew update > /dev/null

    # upgrade installed formulae
    brew upgrade > /dev/null
}

function homebrew_clean_up() {
    # remove outdated versions from cellar
    brew cleanup > /dev/null
}

function __homebrew_on_exit() {
    unset -f homebrew_install_binary
    unset -f homebrew_install_package
    unset -f homebrew_update
    unset -f homebrew_clean_up
}
trap __homebrew_on_exit EXIT
